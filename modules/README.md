# Modules

The FarmData2 modules

- farm_fd2 - the main FarmData2 module.
- farm_fd2_examples - the FarmData2 examples module.
- farm_fd2_school - the FarmData2 school module.

- cypress - cypress configuration shared by all modules.
- cypress.config.js - cypress configuration shared by all modules.
  - these are sym linked inside each module directory.

## Module Structure

Inside each of the above module directories there are the following directories and files:

- src - contains all source code for the module
- cypress - symbolic link to the `cypress` directory in modules
  - all modules share same configuration for cypress
- cypress.config.js - symbolic link to the `cypress.config.js` file in modules
  - all modules share same configuration for cypress
- vite.config.js - the vite build configuration for the module.
- dist - distribution files for the module
  - generated by the vite build
- src/entrypoints - all of the entrypoints (i.e. pages) in the module.
  - one sub-directory for each entry point.
  - entry point names must be unique within a module.
    - created with bin/addEntrypoint.bash
      - App.vue - code for the entrypoint (you edit this).
      - \*.cy.js - tests for the entrypoint (you create these)
      - index.html - scaffolding (auto generated by bin/addEntrypoint.bash)
      - main.js - scaffolding (auto generated)
  - module - scaffolding (auto edited by bin/addEntrypoint.bash)
  - public - scaffolding
  - shared - scaffolding
  - stores - used by Vue pinia store
  - composer.json - Drupal configuration information (only for farm_fd2)

## Adding an new Entry Point

- ensure you have no uncommitted changes
- switch to `development` branch
- run `addEntrypoint.bash`
  - Will create a new feature branch
  - Switch to that branch
  - Add boilerplate and starter code to it
  - Run some basic tests against the added code
    - Note: running test script also builds the module containing the new entry point.
- Edit `App.vue` to implement the entry point.
- Add `\*.cy.js` files to test the new entry point.

## Testing

- use bin/test.bash
